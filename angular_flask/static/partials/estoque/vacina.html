<div>
  <div class="row">
    <div class="col-md-12">
      <h1 class="page-head-line">Vacinas</h1>
      <h1 class="page-subhead-line">Cadastre vacinas e seus lotes, e confira uma lista do que já está registrado</h1>
      <a ng-click="vm.helpActive = !vm.helpActive" class="btn btn-link pull-right"><span class="fa fa-info"></span></a>

      <div ng-show="vm.status" class="alert alert-info">{{vm.status}}</div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          Cadastrar Vacina
        </div>
        <div class="panel-body">
          <form ng-submit="vm.add()">
            <div class="row">
              <div class="col-xs-6">
                <div class="form-group">
                  <label>Nome *</label>
                  <input class="form-control" type="text" data-ng-model="vm.form.vacina.nome">
                  <p class="help-block" ng-show="vm.helpActive">Insira o nome da vacina</p>
                </div>
              </div>
              <div class="col-xs-2">
                <div class="form-group">
                  <label>Doses *</label>
                  <input class="form-control" type="text" data-ng-model="vm.form.vacina.total_doses">
                  <p class="help-block" ng-show="vm.helpActive">Total de doses</p>
                </div>
              </div>
              <div class="col-xs-2">
                <div class="form-group">
                  <label>Intervalo *</label>
                  <input class="form-control" type="text" data-ng-model="vm.form.vacina.quantidade">
                  <p class="help-block" ng-show="vm.helpActive">Insira a quantidade</p>
                </div>
              </div>
              <div class="col-xs-2">
                <div class="form-group">
                  <label>Lote</label>
                  <a class="form-control btn btn-link" ng-click="vm.incluirLote()" data-toggle="tooltip" data-placement="top" title="Adicionar informações sobre um lote">
                    <span class="fa fa-plus"></span>&nbsp;<span class="fa fa-barcode"></span>&nbsp;
                    <b>Adicionar</b>
                  </a>
                </div>
              </div>
            </div>
            <div class="row">
              <fieldset data-ng-repeat="lote in vm.form.lotes">
                <div class="col-xs-5">
                  <div class="form-group">
                    <label>Número *</label>
                    <input class="form-control" type="text" data-ng-model="lote.numero">
                    <p class="help-block" ng-show="vm.helpActive">Identificação do lote</p>
                  </div>
                </div>
                <div class="col-xs-3">
                  <div class="form-group">
                    <label>Vencimento *</label>
                    <input class="form-control" type="text" data-ng-model="lote.vencimento">
                    <p class="help-block" ng-show="vm.helpActive">Data de vencimento</p>
                  </div>
                </div>
                <div class="col-xs-2">
                  <div class="form-group">
                    <label>Preço (R$) *</label>
                    <input class="form-control" type="text" data-ng-model="lote.preco">
                    <p class="help-block" ng-show="vm.helpActive">Preço da vacina</p>
                  </div>
                </div>
                <div class="col-xs-2">
                  <div class="form-group" ng-hide="$first">
                    <label>Remover</label>
                    <a class="form-control btn btn-link" ng-click="vm.delLote(lote)" data-toggle="tooltip" data-placement="top" title="" data-title="Remover este lote">
                      <i class="fa fa-minus"></i>&nbsp;<i class="fa fa-barcode"></i>
                    </a>
                  </div>
                </div>
              </fieldset>
            </div>
            <div class="row">
              <div class="col-xs-12">
                <a class="btn btn-link" ng-click="vm.add()"><span class="fa fa-check"></span>&nbsp; <b>Salvar</b></a>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          Vacinas
        </div>
        <div class="panel-body">
          <div class="row">
            <div class="col-xs-12">
              <div class="form-group">
                <label>Insira os parâmetros da busca</label>
                <input class="form-control" type="text" ng-model="vm.filtroVacina">
                <p class="help-block" ng-show="vm.helpActive">Você pode pesquisar por qualquer dado da vacina</p>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12">
              <div class="table-wrapper">
                <table class="table table-striped table-hover">
                  <thead>
                    <tr>
                      <th class="col-xs-1">#</th>
                      <th class="col-xs-6">Nome</th>
                      <th class="col-xs-1">Dose</th>
                      <th class="col-xs-1">Intervalo</th>
                      <th class="col-xs-3">Ações</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr dir-paginate="entry in vm.vacinas | filter:vm.filtroVacina | orderBy: 'nome' | itemsPerPage: 10" pagination-id="vacina">
                      <td>
                        <input type="checkbox" ng-model="entry.checked" ng-click="vm.updateSelection(entry.id, vm.vacinas); vm.getLote(entry)">
                      </td>
                      <td>
                        <span data-ng-hide="editMode">{{entry.nome}}</span>
                        <input type="text" data-ng-show="editMode" data-ng-model="entry.nome" data-ng-required>
                      </td>
                      <td>
                        <span data-ng-hide="editMode">{{entry.total_doses}}</span>
                        <input type="text" data-ng-show="editMode" data-ng-model="entry.total_doses" data-ng-required>
                      </td>
                      <td>
                        <span data-ng-hide="editMode">{{entry.intervalo}}</span>
                        <input type="text" data-ng-show="editMode" data-ng-model="entry.intervalo" data-ng-required>
                      </td>
                      <td>
                        <a class="btn btn-link" data-ng-hide="editMode" data-ng-click="editMode = true" data-toggle="tooltip" data-placement="top" title="Alterar dados cadastrados"><span class="fa fa-pencil"></span></a>
                        <a class="btn btn-link" data-ng-show="editMode" data-ng-click="vm.alt(entry); editMode = false" data-toggle="tooltip" data-placement="top" title="Salvar alterações"><span class="fa fa-check"></span></a>
                        <a class="btn btn-link" data-ng-show="editMode" data-ng-click="editMode = false" data-toggle="tooltip" data-placement="top" title="Cancelar alterações"><span class="fa fa-close"></span></a>
                        <a class="btn btn-link pull-right" ng-click="vm.del(entry)" data-toggle="tooltip" data-placement="top" title="Excluir cadastro"><span class="fa fa-trash"></span></a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12 text-center">
              <dir-pagination-controls pagination-id="vacina"></dir-pagination-controls>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xs-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          Lotes
        </div>
        <div class="panel-body">
          <div class="row">
            <div class="col-xs-12">
              <div class="form-group">
                <label>Insira os parâmetros da busca</label>
                <input class="form-control" type="text" ng-model="vm.filtroLote">
                <p class="help-block" ng-show="vm.helpActive">Você pode pesquisar por qualquer dado do lote</p>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12">
              <div class="table-wrapper">
                <table class="table table-striped table-hover">
                  <thead>
                    <tr>
                      <th class="col-xs-8">Número</th>
                      <th class="col-xs-2">Vencimento</th>
                      <th class="col-xs-2">Preço</th>
                      <th class="col-xs-2">Ações</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr dir-paginate="entry in vm.form.lotes.lote | filter:vm.filtroLote | orderBy: 'vencimento' : reverse | itemsPerPage: 10" pagination-id="lote">
                      <td>
                        <span data-ng-hide="editMode">{{entry.numero}}</span>
                        <input type="text" data-ng-show="editMode" data-ng-model="entry.numero" data-ng-required>
                      </td>
                      <td>
                        <span data-ng-hide="editMode">{{entry.vencimento}}</span>
                        <input type="text" data-ng-show="editMode" data-ng-model="entry.vencimento" data-ng-required>
                      </td>
                      <td>
                        <span data-ng-hide="editMode">{{entry.preco}}</span>
                        <input type="text" data-ng-show="editMode" data-ng-model="entry.preco" data-ng-required>
                      </td>
                      <td>
                        <a class="btn btn-link" data-ng-hide="editMode" data-ng-click="editMode = true" data-toggle="tooltip" data-placement="top" title="Alterar dados cadastrados"><span class="fa fa-pencil"></span></a>
                        <a class="btn btn-link" data-ng-show="editMode" data-ng-click="vm.altLote(entry); editMode = false" data-toggle="tooltip" data-placement="top" title="Salvar alterações"><span class="fa fa-check"></span></a>
                        <a class="btn btn-link" data-ng-show="editMode" data-ng-click="editMode = false" data-toggle="tooltip" data-placement="top" title="Cancelar alterações"><span class="fa fa-close"></span></a>
                        <a class="btn btn-link pull-right" ng-click="vm.delLote(entry)" data-toggle="tooltip" data-placement="top" title="Excluir cadastro"><span class="fa fa-trash"></span></a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12 text-center">
              <dir-pagination-controls pagination-id="lote"></dir-pagination-controls>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
